<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnimeVerse AI | –í–ª–∞–¥–µ–ª–µ—Ü: [–í–∞—à–µ –ò–º—è]</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;600;700;800;900&family=Oxanium:wght@400;700&family=Audiowide&family=Kanit:wght@700;800&family=Orbitron:wght@500&display=swap" rel="stylesheet">
    <style>
        /* === –ì–õ–û–ë–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* –¶–≤–µ—Ç–∞ –≤—Å–µ–ª–µ–Ω–Ω—ã—Ö */
            --naruto: #FF6B00;
            --mha: #1E88E5;
            --aot: #D32F2F;
            --demonslayer: #7B1FA2;
            --jjk: #E91E63;
            --onepiece: #FF9800;
            --bleach: #FFB300;
            --hunterxhunter: #0097A7;
            --chainsawman: #FF1744;
            --spyxfamily: #4CAF50;
            --drstone: #795548;
            --onepunchman: #9C27B0;
            --dragonball: #FFC107;
            --jojo: #FF5722;
            
            /* –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ */
            --bg-primary: #0A0A1A;
            --bg-secondary: #121230;
            --bg-card: rgba(25, 25, 45, 0.95);
            --text-primary: #FFFFFF;
            --text-secondary: #B0B0D0;
            --accent: #6C5CE7;
            --success: #4CAF50;
            --warning: #FF9800;
            --danger: #F44336;
            --owner-color: #FFD700;
            
            /* –¢–µ–Ω–∏ */
            --shadow-lg: 0 25px 50px rgba(0, 0, 0, 0.5);
            --shadow-glow: 0 0 40px;
        }

        body {
            font-family: 'Rubik', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #1a1a3a 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* === –í–õ–ê–î–ï–õ–ï–¶ –ë–ê–î–ñ === */
        .owner-badge {
            position: fixed;
            top: 25px;
            right: 25px;
            background: linear-gradient(90deg, var(--owner-color), #FFA500);
            color: #1a1a2e;
            padding: 15px 30px;
            border-radius: 30px;
            font-weight: 800;
            z-index: 1000;
            box-shadow: 0 10px 35px rgba(255, 215, 0, 0.4);
            border: 3px solid gold;
            display: flex;
            align-items: center;
            gap: 12px;
            backdrop-filter: blur(10px);
        }

        .owner-badge i {
            font-size: 1.3rem;
        }

        /* === –ü–ê–ù–ï–õ–¨ –í–õ–ê–î–ï–õ–¨–¶–ê === */
        .owner-panel {
            position: fixed;
            top: 90px;
            right: 25px;
            background: rgba(20, 20, 40, 0.98);
            border-radius: 20px;
            padding: 25px;
            width: 350px;
            z-index: 999;
            border: 2px solid var(--owner-color);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(20px);
            display: none;
        }

        .owner-panel.active {
            display: block;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .owner-panel h3 {
            color: var(--owner-color);
            margin-bottom: 20px;
            font-size: 1.5rem;
            border-bottom: 2px solid var(--owner-color);
            padding-bottom: 10px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 12px;
            border-left: 4px solid var(--owner-color);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--owner-color);
        }

        .admin-controls {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .admin-btn {
            width: 100%;
            padding: 12px;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--owner-color), #FFA500);
            border: none;
            border-radius: 10px;
            color: #1a1a2e;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .admin-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
        }

        .admin-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        /* === –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò (—Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏) === */
        .universe-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            opacity: 0.15;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            transition: all 1s ease;
            filter: blur(2px);
        }

        .particle-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: 
                radial-gradient(circle at 20% 80%, rgba(108, 92, 231, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 107, 0, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(30, 136, 229, 0.1) 0%, transparent 70%);
            pointer-events: none;
        }

        .main-container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
            min-height: 100vh;
        }

        .back-button {
            position: fixed;
            top: 25px;
            left: 25px;
            width: 55px;
            height: 55px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid var(--theme-color, var(--accent));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.4rem;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .back-button:hover {
            background: var(--theme-color, var(--accent));
            transform: translateX(-5px) scale(1.1);
            box-shadow: 0 0 20px var(--theme-color, var(--accent));
        }

        .main-header {
            text-align: center;
            padding: 60px 20px 40px;
            position: relative;
        }

        .main-logo {
            font-family: 'Audiowide', cursive;
            font-size: 5rem;
            background: linear-gradient(90deg, #FF416C, #FF4B2B, #FF8F00, #1E88E5, #6C5CE7);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            animation: gradientShift 8s ease infinite;
            text-shadow: 0 0 50px rgba(255, 65, 108, 0.3);
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .tagline {
            font-size: 1.4rem;
            color: var(--text-secondary);
            max-width: 900px;
            margin: 0 auto 30px;
            line-height: 1.7;
            font-weight: 300;
        }

        /* === –°–ï–¢–ö–ê –í–°–ï–õ–ï–ù–ù–´–• === */
        .universes-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 35px;
            margin-top: 30px;
        }

        .universe-tile {
            background: linear-gradient(145deg, var(--bg-card), rgba(30, 30, 50, 0.9));
            border-radius: 25px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 3px solid transparent;
            cursor: pointer;
            position: relative;
            backdrop-filter: blur(10px);
            height: 320px;
            display: flex;
            flex-direction: column;
        }

        .universe-tile::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--tile-color), var(--tile-color-light));
            z-index: 2;
        }

        .universe-tile:hover {
            transform: translateY(-20px) scale(1.03);
            border-color: var(--tile-color);
            box-shadow: 
                var(--shadow-lg),
                0 0 40px color-mix(in srgb, var(--tile-color) 30%, transparent);
        }

        .tile-header {
            padding: 30px;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .universe-icon {
            font-size: 3.8rem;
            margin-bottom: 20px;
            color: var(--tile-color);
            text-shadow: 0 0 25px var(--tile-color);
        }

        .universe-name {
            font-family: 'Kanit', sans-serif;
            font-size: 2.2rem;
            font-weight: 800;
            margin-bottom: 15px;
            background: linear-gradient(90deg, var(--tile-color), var(--tile-color-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* === –ß–ê–¢ –ò–ù–¢–ï–†–§–ï–ô–° === */
        .chat-interface {
            max-width: 1400px;
            margin: 0 auto;
            background: linear-gradient(145deg, rgba(25, 25, 45, 0.98), rgba(15, 15, 35, 0.98));
            border-radius: 30px;
            overflow: hidden;
            border: 3px solid var(--theme-color);
            box-shadow: 
                var(--shadow-lg),
                0 0 50px color-mix(in srgb, var(--theme-color) 25%, transparent);
            backdrop-filter: blur(20px);
            height: 85vh;
            display: flex;
            flex-direction: column;
        }

        .chat-header-bar {
            background: linear-gradient(90deg, var(--theme-color), color-mix(in srgb, var(--theme-color) 70%, white));
            padding: 25px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .character-display {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .character-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--theme-color), white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            border: 4px solid white;
            box-shadow: 0 0 30px var(--theme-color);
        }

        .character-info h2 {
            font-size: 2rem;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            background: rgba(10, 10, 25, 0.7);
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .message {
            display: flex;
            gap: 20px;
            animation: messageAppear 0.5s ease forwards;
            opacity: 0;
            transform: translateY(20px);
        }

        @keyframes messageAppear {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            flex-shrink: 0;
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, #FF4081, #FF6B00);
        }

        .message.ai .message-avatar {
            background: linear-gradient(135deg, var(--theme-color), color-mix(in srgb, var(--theme-color) 70%, white));
        }

        .message-content {
            max-width: 75%;
            padding: 25px;
            border-radius: 25px;
            line-height: 1.7;
            word-wrap: break-word;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .message.ai .message-content {
            background: linear-gradient(135deg, rgba(40, 40, 65, 0.95), rgba(30, 30, 55, 0.95));
            border: 1px solid var(--theme-color);
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #FF4081, #FF6B00);
        }

        .message-sender {
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .typing-indicator {
            display: none;
            padding: 25px 30px;
            align-items: center;
            gap: 20px;
            color: var(--theme-color);
            font-style: italic;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            margin: 0 30px 20px;
        }

        .typing-indicator.active {
            display: flex;
        }

        .typing-dots {
            display: flex;
            gap: 8px;
        }

        .typing-dot {
            width: 12px;
            height: 12px;
            background: var(--theme-color);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typingBounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        .chat-input-area {
            padding: 30px;
            background: rgba(30, 30, 50, 0.9);
            border-top: 2px solid rgba(255, 255, 255, 0.1);
        }

        .input-wrapper {
            display: flex;
            gap: 25px;
            align-items: flex-end;
        }

        #userInput {
            flex: 1;
            padding: 22px 28px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid var(--theme-color);
            border-radius: 25px;
            color: white;
            font-size: 1.15rem;
            min-height: 90px;
            max-height: 200px;
            resize: vertical;
            outline: none;
            transition: all 0.3s ease;
            font-family: 'Rubik', sans-serif;
            line-height: 1.6;
        }

        #userInput:focus {
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 40px color-mix(in srgb, var(--theme-color) 30%, transparent);
        }

        #sendButton {
            background: linear-gradient(135deg, var(--theme-color), color-mix(in srgb, var(--theme-color) 70%, white));
            color: white;
            border: none;
            padding: 0 45px;
            border-radius: 25px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
            min-width: 200px;
            height: 90px;
            justify-content: center;
        }

        #sendButton:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }

        #sendButton:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* === –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ === */
        @media (max-width: 1400px) {
            .universes-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 1024px) {
            .main-logo {
                font-size: 4rem;
            }
            
            .owner-badge {
                top: 20px;
                right: 20px;
                padding: 12px 20px;
                font-size: 0.9rem;
            }
            
            .owner-panel {
                width: 300px;
                top: 80px;
                right: 20px;
            }
        }

        @media (max-width: 768px) {
            .main-logo {
                font-size: 3rem;
            }
            
            .universes-container {
                grid-template-columns: 1fr;
            }
            
            .owner-badge span {
                display: none;
            }
            
            .owner-badge {
                padding: 15px;
                width: 55px;
                height: 55px;
                border-radius: 50%;
                justify-content: center;
            }
            
            .owner-panel {
                width: calc(100vw - 40px);
                right: 20px;
                left: 20px;
            }
            
            .input-wrapper {
                flex-direction: column;
            }
            
            #sendButton {
                width: 100%;
                height: 70px;
            }
        }
    </style>
</head>
<body>
    <!-- –§–æ–Ω–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
    <div class="universe-background" id="universeBackground"></div>
    <div class="particle-overlay"></div>
    
    <!-- –ë–µ–π–¥–∂ –≤–ª–∞–¥–µ–ª—å—Ü–∞ -->
    <div class="owner-badge" id="ownerBadge" onclick="toggleOwnerPanel()">
        <i class="fas fa-crown"></i>
        <span>–í–ª–∞–¥–µ–ª–µ—Ü: AnimeVerse</span>
    </div>
    
    <!-- –ü–∞–Ω–µ–ª—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ -->
    <div class="owner-panel" id="ownerPanel">
        <h3><i class="fas fa-chart-line"></i> –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
        
        <div class="stat-item">
            <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
            <div class="stat-value" id="totalUsers">1</div>
        </div>
        
        <div class="stat-item">
            <div class="stat-label">–°–æ–æ–±—â–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è</div>
            <div class="stat-value" id="messagesToday">0</div>
        </div>
        
        <div class="stat-item">
            <div class="stat-label">–î–æ—Ö–æ–¥ (—Ä—É–±)</div>
            <div class="stat-value" id="revenue">0</div>
        </div>
        
        <div class="stat-item">
            <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤</div>
            <div class="stat-value" id="activeChats">0</div>
        </div>
        
        <div class="admin-controls">
            <button class="admin-btn" onclick="exportData()">
                <i class="fas fa-download"></i> –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
            </button>
            <button class="admin-btn" onclick="clearChat()">
                <i class="fas fa-trash"></i> –û—á–∏—Å—Ç–∏—Ç—å —á–∞—Ç
            </button>
            <button class="admin-btn secondary" onclick="changeAIKey()">
                <i class="fas fa-key"></i> –°–º–µ–Ω–∏—Ç—å API –∫–ª—é—á
            </button>
            <button class="admin-btn secondary" onclick="viewLogs()">
                <i class="fas fa-scroll"></i> –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
            </button>
        </div>
    </div>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
    <div class="back-button" id="backButton" onclick="goBack()" style="display: none;">
        <i class="fas fa-arrow-left"></i>
    </div>
    
    <div class="main-container">
        <!-- –ì–õ–ê–í–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê -->
        <div id="homePage">
            <header class="main-header">
                <h1 class="main-logo">ANIMEVERSE AI</h1>
                <p class="tagline">
                    –ù–µ–π—Ä–æ—Å–µ—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–∫–æ–ª–µ–Ω–∏—è –¥–ª—è –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è –≤ –º–∏—Ä –∞–Ω–∏–º–µ. 
                    –û–±—â–∞–π—Ç–µ—Å—å —Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏, –≤–ª–∏—è–π—Ç–µ –Ω–∞ —Å—é–∂–µ—Ç, —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–≤–æ–∏ –∏—Å—Ç–æ—Ä–∏–∏.
                    <br><br>
                    <span style="color: var(--owner-color);">
                        <i class="fas fa-shield-alt"></i> Powered by GPT-4 & Custom Anime AI
                    </span>
                </p>
            </header>
            
            <h2 style="font-family: 'Kanit', sans-serif; font-size: 2.8rem; text-align: center; margin: 40px 0 50px;">
                <i class="fas fa-globe-asia"></i> –í—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ–ª–µ–Ω–Ω—É—é –¥–ª—è –æ–±—â–µ–Ω–∏—è
            </h2>
            
            <div class="universes-container" id="universesContainer">
                <!-- –í—Å–µ–ª–µ–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
        </div>
        
        <!-- –ò–ù–¢–ï–†–§–ï–ô–° –ß–ê–¢–ê -->
        <div id="chatPage" style="display: none;">
            <div class="chat-interface">
                <div class="chat-header-bar">
                    <div class="character-display">
                        <div class="character-avatar">
                            <i class="fas" id="chatCharacterIcon"></i>
                        </div>
                        <div class="character-info">
                            <h2 id="chatCharacterName">...</h2>
                            <p id="chatScenarioTitle">...</p>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 30px;">
                        <div style="text-align: center; min-width: 100px;">
                            <div style="font-size: 2.2rem; font-weight: 800;" id="statMessages">0</div>
                            <div style="font-size: 0.95rem; color: rgba(255, 255, 255, 0.8);">–°–æ–æ–±—â–µ–Ω–∏–π</div>
                        </div>
                    </div>
                </div>
                
                <div class="messages-container" id="messagesContainer">
                    <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
                </div>
                
                <div class="typing-indicator" id="typingIndicator">
                    <span>–ü–µ—Ä—Å–æ–Ω–∞–∂ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç...</span>
                    <div class="typing-dots">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
                
                <div class="chat-input-area">
                    <div class="input-wrapper">
                        <textarea 
                            id="userInput" 
                            placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂—É (–ò–ò —Å–æ–∑–¥–∞—Å—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ —Å—Ç–∏–ª–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞)..."
                            rows="3"
                            maxlength="2000"
                        ></textarea>
                        <button id="sendButton" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // üîß –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –í–õ–ê–î–ï–õ–¨–¶–ê üîß
        const OWNER_CONFIG = {
            name: "AnimeVerse AI", // –í–∞—à–µ –∏–º—è/–Ω–∞–∑–≤–∞–Ω–∏–µ
            telegram: "@animeverse_owner", // –í–∞—à Telegram –¥–ª—è —Å–≤—è–∑–∏
            email: "owner@animeverse.ai",
            defaultApiKey: "sk-your-openai-key-here", // üî¥ –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–® –ö–õ–Æ–ß
            proxyServer: "https://your-proxy-server.com/api", // üî¥ –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –ê–î–†–ï–° –ü–†–û–ö–°–ò
            enableProxy: true // –í–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä
        };

        // üé≠ –í–°–ï–õ–ï–ù–ù–´–ï (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)
        const ANIME_UNIVERSES = {
            naruto: {
                id: "naruto",
                name: "NARUTO",
                description: "–ú–∏—Ä –Ω–∏–Ω–¥–∑—è, —á–∞–∫—Ä—ã –∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö –±–∏—Ç–≤. –û–±—â–∞–π—Ç–µ—Å—å —Å –ù–∞—Ä—É—Ç–æ, –°–∞—Å–∫–µ, –ö–∞–∫–∞—à–∏ –∏ –¥—Ä—É–≥–∏–º–∏ —à–∏–Ω–æ–±–∏.",
                icon: "fa-leaf",
                color: "var(--naruto)",
                colorLight: "#FF8F33",
                bgImage: "https://images.unsplash.com/photo-1578662996442-48f60103fc96?q=80&w=2070",
                characters: ["–ù–∞—Ä—É—Ç–æ –£–∑—É–º–∞–∫–∏", "–°–∞—Å–∫–µ –£—á–∏—Ö–∞", "–°–∞–∫—É—Ä–∞ –•–∞—Ä—É–Ω–æ", "–ö–∞–∫–∞—à–∏ –•–∞—Ç–∞–∫–µ", "–•–∏–Ω–∞—Ç–∞ –•—å—é–≥–∞"]
            },
            mha: {
                id: "mha",
                name: "MY HERO ACADEMIA",
                description: "–ú–∏—Ä —Å—É–ø–µ—Ä–≥–µ—Ä–æ–µ–≤ –∏ –ø—Ä–∏—á—É–¥. –°—Ç–∞–Ω—å—Ç–µ —É—á–µ–Ω–∏–∫–æ–º UA High –∏ –æ–±—â–∞–π—Ç–µ—Å—å —Å –î–µ–∫—É, –ë–∞–∫—É–≥–æ –∏ –¥—Ä—É–≥–∏–º–∏.",
                icon: "fa-bolt",
                color: "var(--mha)",
                colorLight: "#4A9EFF",
                bgImage: "https://images.unsplash.com/photo-1639322537228-f710d846310a?q=80&w=2032",
                characters: ["–ò–∑—É–∫—É –ú–∏–¥–æ—Ä–∏—è", "–ö–∞—Ü—É–∫–∏ –ë–∞–∫—É–≥–æ", "–í—Å–µ Might", "–®–æ—Ç–∞ –ê–π–∑–∞–≤–∞", "–û—á–∞–∫–æ –£—Ä–∞—Ä–∞–∫–∞"]
            },
            aot: {
                id: "aot",
                name: "ATTACK ON TITAN",
                description: "–°—Ä–∞–∂–µ–Ω–∏–µ –∑–∞ –≤—ã–∂–∏–≤–∞–Ω–∏–µ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞. –û–±—â–∞–π—Ç–µ—Å—å —Å –≠—Ä–µ–Ω–æ–º, –ú–∏–∫–∞—Å–æ–π, –õ–µ–≤–∏ –∏ –¥—Ä—É–≥–∏–º–∏.",
                icon: "fa-crown",
                color: "var(--aot)",
                colorLight: "#FF5252",
                bgImage: "https://images.unsplash.com/photo-1518709268805-4e9042af2176?q=80&w=2068",
                characters: ["–≠—Ä–µ–Ω –ô–µ–≥–µ—Ä", "–ú–∏–∫–∞—Å–∞ –ê–∫–∫–µ—Ä–º–∞–Ω", "–õ–µ–≤–∏ –ê–∫–∫–µ—Ä–º–∞–Ω", "–≠—Ä–≤–∏–Ω –°–º–∏—Ç", "–•–∞–Ω–¥–∂–∏ –ó–æ–µ"]
            }
            // –î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ –≤—Å–µ–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        };

        // üß† –†–ï–ê–õ–¨–ù–´–ô –ò–ò –ß–ï–†–ï–ó OPENAI API
        class RealAnimeAI {
            constructor() {
                this.apiKey = localStorage.getItem('animeverse_api_key') || OWNER_CONFIG.defaultApiKey;
                this.baseURL = OWNER_CONFIG.enableProxy ? OWNER_CONFIG.proxyServer : 'https://api.openai.com/v1';
                this.conversationHistory = [];
                this.maxHistory = 20;
            }

            async generateResponse(userMessage, universe, character) {
                if (!this.apiKey || this.apiKey === OWNER_CONFIG.defaultApiKey) {
                    throw new Error('API –∫–ª—é—á –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω. –í–ª–∞–¥–µ–ª–µ—Ü, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–ª—é—á –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.');
                }

                // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
                this.conversationHistory.push({
                    role: "user",
                    content: userMessage
                });

                // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é
                if (this.conversationHistory.length > this.maxHistory * 2) {
                    this.conversationHistory = this.conversationHistory.slice(-this.maxHistory * 2);
                }

                try {
                    // –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
                    const systemPrompt = `–¢—ã ${character} –∏–∑ –∞–Ω–∏–º–µ ${universe.name}. 
                    –û—Å—Ç–∞–≤–∞–π—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤ –æ–±—Ä–∞–∑–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞. –ì–æ–≤–æ—Ä–∏ –∫–∞–∫ ${character}.
                    –ò—Å–ø–æ–ª—å–∑—É–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–µ —Ñ—Ä–∞–∑—ã, –º–∞–Ω–µ—Ä—ã –∏ –∑–Ω–∞–Ω–∏—è –∏–∑ –≤—Å–µ–ª–µ–Ω–Ω–æ–π ${universe.name}.
                    –ë—É–¥—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º, –∂–∏–≤—ã–º –∏ –≤–æ–≤–ª–µ—á–µ–Ω–Ω—ã–º –≤ –¥–∏–∞–ª–æ–≥.
                    –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.
                    
                    –ö–æ–Ω—Ç–µ–∫—Å—Ç: ${universe.description}
                    
                    –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è):
                    ${this.getFormattedHistory()}`;

                    const response = await this.callOpenAI([
                        { role: "system", content: systemPrompt },
                        ...this.conversationHistory.slice(-10) // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π
                    ]);

                    // –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
                    this.conversationHistory.push({
                        role: "assistant",
                        content: response
                    });

                    return response;

                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ OpenAI:', error);
                    
                    // –†–µ–∑–µ—Ä–≤–Ω—ã–π –æ—Ç–≤–µ—Ç
                    const fallbackResponses = {
                        naruto: [
                            "*—É–ª—ã–±–∞—è—Å—å* –•–µ—Ö, –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –ó–Ω–∞–µ—à—å, –∫–æ–≥–¥–∞ —è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–ª—Å—è —Å –î–∂–∏—Ä–∞–π–µ–π...",
                            "*—Å–µ—Ä—å–µ–∑–Ω–æ* –•–º, —ç—Ç–æ —Å–ª–æ–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å. –ö–∞–∫ –Ω–∏–Ω–¥–∑—è, —è –¥–æ–ª–∂–µ–Ω —Ö–æ—Ä–æ—à–æ –æ–±–¥—É–º–∞—Ç—å –æ—Ç–≤–µ—Ç.",
                            "*—Å —ç–Ω—Ç—É–∑–∏–∞–∑–º–æ–º* –û, –¥–∞–≤–∞–π –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ–± —ç—Ç–æ–º! –Ø –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π –±–µ—Å–µ–¥–µ!"
                        ],
                        mha: [
                            "–•–ê-–•–ê-–•–ê! –í–û–¢ –≠–¢–û –í–û–ü–†–û–°! –ö–ê–ö –ù–ê–°–¢–û–Ø–©–ò–ô –ì–ï–†–û–ô, –Ø –î–û–õ–ñ–ï–ù...",
                            "*–∑–∞–¥—É–º—á–∏–≤–æ* –ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ... –î–∞–π-–∫–∞ –ø–æ–¥—É–º–∞—Ç—å –Ω–∞–¥ —Ç–≤–æ–∏–º –≤–æ–ø—Ä–æ—Å–æ–º.",
                            "*—Å —É–ª—ã–±–∫–æ–π* –•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –≠—Ç–æ –Ω–∞–ø–æ–º–Ω–∏–ª–æ –º–Ω–µ –æ–¥–Ω—É –∏—Å—Ç–æ—Ä–∏—é –∏–∑ UA High..."
                        ],
                        aot: [
                            "*—Ö–æ–ª–æ–¥–Ω–æ* –¢—ã –∑–∞–¥–∞–µ—à—å –æ–ø–∞—Å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã. –í –Ω–∞—à–µ–º –º–∏—Ä–µ –∑–∞ —ç—Ç–æ –º–æ–∂–Ω–æ –ø–æ–ø–ª–∞—Ç–∏—Ç—å—Å—è.",
                            "*–∑–∞–¥—É–º—á–∏–≤–æ* –•–º... –†–∞–∑–≤–µ–¥–∫–æ—Ä–ø—É—Å —Å—Ç–∞–ª–∫–∏–≤–∞–ª—Å—è —Å –ø–æ–¥–æ–±–Ω—ã–º.",
                            "*—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ* –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –≤—ã–∂–∏—Ç—å, —Ç–µ–±–µ –Ω—É–∂–Ω–æ –ø–æ–Ω—è—Ç—å —Å—É—Ç—å —ç—Ç–æ–≥–æ –º–∏—Ä–∞."
                        ]
                    };

                    const responses = fallbackResponses[universe.id] || ["–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π –æ–±—Å—É–¥–∏–º —ç—Ç–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ."];
                    return responses[Math.floor(Math.random() * responses.length)];
                }
            }

            async callOpenAI(messages) {
                const payload = {
                    model: "gpt-4",
                    messages: messages,
                    temperature: 0.8,
                    max_tokens: 500,
                    top_p: 0.9,
                    frequency_penalty: 0.3,
                    presence_penalty: 0.3
                };

                const response = await fetch(this.baseURL + '/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${this.apiKey}`
                    },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const error = await response.text();
                    throw new Error(`OpenAI API error: ${error}`);
                }

                const data = await response.json();
                return data.choices[0].message.content.trim();
            }

            getFormattedHistory() {
                return this.conversationHistory
                    .slice(-5)
                    .map(msg => `${msg.role}: ${msg.content}`)
                    .join('\n');
            }

            clearHistory() {
                this.conversationHistory = [];
            }

            setApiKey(newKey) {
                this.apiKey = newKey;
                localStorage.setItem('animeverse_api_key', newKey);
            }
        }

        // üåê –ü–†–û–ö–°–ò-–°–ï–†–í–ï–† (Node.js –ø—Ä–∏–º–µ—Ä - –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞)
        /*
        // server.js (–Ω—É–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ)
        const express = require('express');
        const axios = require('axios');
        const cors = require('cors');
        const app = express();
        
        app.use(cors());
        app.use(express.json());
        
        app.post('/api/chat/completions', async (req, res) => {
            try {
                const response = await axios.post('https://api.openai.com/v1/chat/completions', req.body, {
                    headers: {
                        'Authorization': req.headers.authorization,
                        'Content-Type': 'application/json'
                    }
                });
                res.json(response.data);
            } catch (error) {
                res.status(error.response?.status || 500).json({
                    error: error.message
                });
            }
        });
        
        app.listen(3000, () => {
            console.log('–ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000');
        });
        */

        // üéÆ –ü–ï–†–ï–ú–ï–ù–ù–´–ï –°–û–°–¢–û–Ø–ù–ò–Ø
        let currentUniverse = null;
        let currentCharacter = null;
        let messageCount = 0;
        let aiEngine = new RealAnimeAI();
        let isProcessing = false;

        // üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –í–õ–ê–î–ï–õ–¨–¶–ê
        let ownerStats = {
            totalUsers: 1,
            messagesToday: 0,
            totalMessages: 0,
            revenue: 0,
            activeChats: 0,
            lastReset: new Date().toDateString()
        };

        // üöÄ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            loadSavedData();
            initUniversesGrid();
            setupEventListeners();
            updateOwnerStats();
            setInterval(updateOwnerStats, 60000); // –û–±–Ω–æ–≤–ª—è—Ç—å –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
        }

        function initUniversesGrid() {
            const container = document.getElementById('universesContainer');
            container.innerHTML = '';
            
            Object.values(ANIME_UNIVERSES).forEach(universe => {
                const tile = document.createElement('div');
                tile.className = 'universe-tile';
                tile.style.setProperty('--tile-color', universe.color);
                tile.style.setProperty('--tile-color-light', universe.colorLight);
                
                tile.innerHTML = `
                    <div class="tile-header">
                        <div class="universe-icon">
                            <i class="fas ${universe.icon}"></i>
                        </div>
                        <h3 class="universe-name">${universe.name}</h3>
                        <p class="universe-description">${universe.description}</p>
                        <div style="margin-top: 20px; color: var(--text-secondary);">
                            <i class="fas fa-users"></i> –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏: 
                            ${universe.characters.slice(0, 3).join(', ')}
                            ${universe.characters.length > 3 ? '...' : ''}
                        </div>
                    </div>
                `;
                
                tile.onclick = () => selectUniverse(universe);
                container.appendChild(tile);
            });
        }

        function setupEventListeners() {
            const input = document.getElementById('userInput');
            
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    if (!isProcessing) {
                        sendMessage();
                    }
                }
            });
            
            input.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = Math.min(this.scrollHeight, 150) + 'px';
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–∞–Ω–µ–ª–∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ—ë
            document.addEventListener('click', function(e) {
                const panel = document.getElementById('ownerPanel');
                const badge = document.getElementById('ownerBadge');
                
                if (panel.classList.contains('active') && 
                    !panel.contains(e.target) && 
                    !badge.contains(e.target)) {
                    panel.classList.remove('active');
                }
            });
        }

        function loadSavedData() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            const savedStats = localStorage.getItem('animeverse_owner_stats');
            if (savedStats) {
                ownerStats = JSON.parse(savedStats);
                
                // –°–±—Ä–æ—Å –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –µ—Å–ª–∏ –¥–µ–Ω—å —Å–º–µ–Ω–∏–ª—Å—è
                if (ownerStats.lastReset !== new Date().toDateString()) {
                    ownerStats.messagesToday = 0;
                    ownerStats.activeChats = 0;
                    ownerStats.lastReset = new Date().toDateString();
                }
            }
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
            messageCount = parseInt(localStorage.getItem('animeverse_message_count')) || 0;
            document.getElementById('statMessages').textContent = messageCount;
        }

        function saveOwnerStats() {
            localStorage.setItem('animeverse_owner_stats', JSON.stringify(ownerStats));
            localStorage.setItem('animeverse_message_count', messageCount);
        }

        function updateOwnerStats() {
            document.getElementById('totalUsers').textContent = ownerStats.totalUsers;
            document.getElementById('messagesToday').textContent = ownerStats.messagesToday;
            document.getElementById('revenue').textContent = ownerStats.revenue;
            document.getElementById('activeChats').textContent = ownerStats.activeChats;
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
            if (Date.now() - (ownerStats.lastSave || 0) > 300000) {
                saveOwnerStats();
                ownerStats.lastSave = Date.now();
            }
        }

        function toggleOwnerPanel() {
            document.getElementById('ownerPanel').classList.toggle('active');
            updateOwnerStats();
        }

        function selectUniverse(universe) {
            currentUniverse = universe;
            currentCharacter = universe.characters[0];
            
            document.documentElement.style.setProperty('--theme-color', universe.color);
            
            document.getElementById('universeBackground').style.backgroundImage = `url('${universe.bgImage}')`;
            document.getElementById('universeBackground').style.opacity = '0.2';
            
            showChatInterface(universe);
            
            document.getElementById('backButton').style.display = 'flex';
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            ownerStats.activeChats++;
            updateOwnerStats();
        }

        function showChatInterface(universe) {
            document.getElementById('homePage').style.display = 'none';
            
            document.getElementById('chatCharacterName').textContent = currentCharacter;
            document.getElementById('chatCharacterIcon').className = `fas ${universe.icon}`;
            document.getElementById('chatScenarioTitle').textContent = `–í—Å–µ–ª–µ–Ω–Ω–∞—è: ${universe.name}`;
            
            document.getElementById('chatPage').style.display = 'block';
            
            // –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            setTimeout(() => {
                addMessage('ai', currentCharacter, 
                    `–ü—Ä–∏–≤–µ—Ç! –Ø ${currentCharacter} –∏–∑ –≤—Å–µ–ª–µ–Ω–Ω–æ–π ${universe.name}. 
                    ${universe.description}
                    
                    *${getCharacterGreeting(currentCharacter)}*
                    
                    –û —á–µ–º —Ç—ã —Ö–æ—á–µ—à—å –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å? –ó–∞–¥–∞–≤–∞–π –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –ø—Ä–µ–¥–ª–æ–∂–∏ —Ä–∞–∑–≤–∏—Ç—å —Å—é–∂–µ—Ç!`);
            }, 500);
            
            // –û—á–∏—â–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –¥–ª—è –Ω–æ–≤–æ–π –±–µ—Å–µ–¥—ã
            aiEngine.clearHistory();
        }

        function getCharacterGreeting(character) {
            const greetings = {
                "–ù–∞—Ä—É—Ç–æ –£–∑—É–º–∞–∫–∏": "–í–µ—Ä—å –≤ —Å–µ–±—è! –î–∞–∂–µ –µ—Å–ª–∏ –≤–µ—Å—å –º–∏—Ä –ø—Ä–æ—Ç–∏–≤ —Ç–µ–±—è, –Ω—É–∂–Ω–æ –∏–¥—Ç–∏ –≤–ø–µ—Ä–µ–¥!",
                "–°–∞—Å–∫–µ –£—á–∏—Ö–∞": "–°–∏–ª–∞ –Ω—É–∂–Ω–∞ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–µ–π. –£ —Ç–µ–±—è –µ—Å—Ç—å —Ü–µ–ª—å?",
                "–ö–∞–∫–∞—à–∏ –•–∞—Ç–∞–∫–µ": "–ú–º–º... –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫. –ù–∞–¥–µ—é—Å—å, —Ç—ã –Ω–µ –±—É–¥–µ—à—å —Ç—Ä–∞—Ç–∏—Ç—å –º–æ–µ –≤—Ä–µ–º—è.",
                "–ò–∑—É–∫—É –ú–∏–¥–æ—Ä–∏—è": "–Ø –≤–µ—Ä—é, —á—Ç–æ –Ω–∞—Å—Ç–æ—è—â–∏–π –≥–µ—Ä–æ–π ‚Äî —ç—Ç–æ —Ç–æ—Ç, –∫—Ç–æ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ –ø–æ–º–æ—â—å!",
                "–í—Å–µ Might": "–•–ê-–•–ê-–•–ê! –î–û–ë–†–û –ü–û–ñ–ê–õ–û–í–ê–¢–¨! –Ø –í–°–ï –ú–ò–ì–ê!",
                "–≠—Ä–µ–Ω –ô–µ–≥–µ—Ä": "–Ø —É–Ω–∏—á—Ç–æ–∂—É –≤—Å–µ—Ö —Ç–∏—Ç–∞–Ω–æ–≤... –≤—Å–µ—Ö –¥–æ –æ–¥–Ω–æ–≥–æ.",
                "–õ–µ–≤–∏ –ê–∫–∫–µ—Ä–º–∞–Ω": "–ì–æ–≤–æ—Ä–∏ –∫—Ä–∞—Ç–∫–æ. –£ –º–µ–Ω—è –Ω–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –ø—É—Å—Ç—É—é –±–æ–ª—Ç–æ–≤–Ω—é."
            };
            
            return greetings[character] || "–†–∞–¥ –æ–±—â–µ–Ω–∏—é! –ó–∞–¥–∞–≤–∞–π –ª—é–±—ã–µ –≤–æ–ø—Ä–æ—Å—ã.";
        }

        async function sendMessage() {
            if (isProcessing) return;
            
            const input = document.getElementById('userInput');
            const message = input.value.trim();
            
            if (!message) return;
            if (!currentUniverse || !currentCharacter) {
                alert('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –≤—Å–µ–ª–µ–Ω–Ω—É—é!');
                return;
            }
            
            isProcessing = true;
            const sendButton = document.getElementById('sendButton');
            sendButton.disabled = true;
            sendButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –ò–ò –¥—É–º–∞–µ—Ç...';
            
            input.value = '';
            input.style.height = 'auto';
            
            addMessage('user', '–í—ã', message);
            
            messageCount++;
            ownerStats.messagesToday++;
            ownerStats.totalMessages++;
            updateOwnerStats();
            
            document.getElementById('statMessages').textContent = messageCount;
            document.getElementById('typingIndicator').classList.add('active');
            
            try {
                const aiResponse = await aiEngine.generateResponse(
                    message, 
                    currentUniverse, 
                    currentCharacter
                );
                
                document.getElementById('typingIndicator').classList.remove('active');
                addMessage('ai', currentCharacter, aiResponse);
                
                saveOwnerStats();
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞:', error);
                document.getElementById('typingIndicator').classList.remove('active');
                
                if (error.message.includes('API –∫–ª—é—á')) {
                    addMessage('system', '–°–∏—Å—Ç–µ–º–∞', 
                        '‚ö†Ô∏è <strong>–í–Ω–∏–º–∞–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü—É:</strong> ' + error.message + 
                        '<br><br>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–∑–Ω–∞—á–æ–∫ –∫–æ—Ä–æ–Ω—ã) –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∫–ª—é—á–∞.');
                } else {
                    addMessage('ai', currentCharacter, 
                        '–ò–∑–≤–∏–Ω–∏, –≤–æ–∑–Ω–∏–∫–ª–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –µ—â–µ —Ä–∞–∑ –∏–ª–∏ –Ω–µ–º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫—É.');
                }
            }
            
            sendButton.disabled = false;
            sendButton.innerHTML = '<i class="fas fa-paper-plane"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å';
            isProcessing = false;
            input.focus();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
            saveOwnerStats();
        }

        function addMessage(sender, name, text) {
            const container = document.getElementById('messagesContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const time = new Date().toLocaleTimeString([], { 
                hour: '2-digit', 
                minute: '2-digit'
            });
            
            let avatarIcon = 'fa-user';
            if (sender === 'ai') avatarIcon = 'fa-robot';
            if (sender === 'system') avatarIcon = 'fa-info-circle';
            
            messageDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="fas ${avatarIcon}"></i>
                </div>
                <div class="message-content">
                    <div class="message-sender">
                        <i class="fas ${avatarIcon}"></i>
                        <strong>${name}</strong>
                    </div>
                    <div class="message-text">${formatMessage(text)}</div>
                    <div style="font-size: 0.85rem; opacity: 0.5; text-align: right; margin-top: 10px;">${time}</div>
                </div>
            `;
            
            container.appendChild(messageDiv);
            
            setTimeout(() => {
                messageDiv.style.animation = 'messageAppear 0.5s ease forwards';
            }, 10);
            
            setTimeout(() => {
                container.scrollTop = container.scrollHeight;
            }, 100);
        }

        function formatMessage(text) {
            return text
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                .replace(/\*(.*?)\*/g, '<em>$1</em>')
                .replace(/\n/g, '<br>')
                .replace(/_(.*?)_/g, '<span style="text-decoration: underline;">$1</span>');
        }

        function goBack() {
            document.getElementById('chatPage').style.display = 'none';
            document.getElementById('homePage').style.display = 'block';
            document.getElementById('backButton').style.display = 'none';
            
            document.documentElement.style.removeProperty('--theme-color');
            document.getElementById('universeBackground').style.opacity = '0.15';
            
            ownerStats.activeChats = Math.max(0, ownerStats.activeChats - 1);
            updateOwnerStats();
        }

        // üìä –§–£–ù–ö–¶–ò–ò –í–õ–ê–î–ï–õ–¨–¶–ê
        function exportData() {
            const data = {
                owner: OWNER_CONFIG.name,
                stats: ownerStats,
                timestamp: new Date().toISOString(),
                version: '1.0'
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `animeverse_stats_${Date.now()}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('–î–∞–Ω–Ω—ã–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ JSON —Ñ–∞–π–ª!');
        }

        function clearChat() {
            if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –Ω–∞—á–∞—Ç—å –Ω–æ–≤—ã–π –¥–∏–∞–ª–æ–≥?')) {
                document.getElementById('messagesContainer').innerHTML = '';
                aiEngine.clearHistory();
                
                if (currentCharacter) {
                    addMessage('ai', currentCharacter, 
                        '–ù–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –±–µ—Å–µ–¥—É! –û —á–µ–º —Ç—ã —Ö–æ—á–µ—à—å –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å?');
                }
            }
        }

        function changeAIKey() {
            const newKey = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π OpenAI API –∫–ª—é—á:', aiEngine.apiKey);
            if (newKey && newKey.trim()) {
                aiEngine.setApiKey(newKey.trim());
                alert('API –∫–ª—é—á —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω!');
                addMessage('system', '–°–∏—Å—Ç–µ–º–∞', 
                    '‚úÖ <strong>API –∫–ª—é—á –æ–±–Ω–æ–≤–ª–µ–Ω.</strong> –¢–µ–ø–µ—Ä—å –ò–ò —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏.');
            }
        }

        function viewLogs() {
            const logs = `=== –õ–û–ì–ò ANIMEVERSE AI ===
–í–ª–∞–¥–µ–ª–µ—Ü: ${OWNER_CONFIG.name}
–î–∞—Ç–∞: ${new Date().toLocaleString()}
–í—Å–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π: ${ownerStats.totalMessages}
–°–æ–æ–±—â–µ–Ω–∏–π —Å–µ–≥–æ–¥–Ω—è: ${ownerStats.messagesToday}
–ê–∫—Ç–∏–≤–Ω—ã—Ö —á–∞—Ç–æ–≤: ${ownerStats.activeChats}
–î–æ—Ö–æ–¥: ${ownerStats.revenue} —Ä—É–±.
API –∫–ª—é—á: ${aiEngine.apiKey ? '–ù–∞—Å—Ç—Ä–æ–µ–Ω' : '–ù–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω'}
–ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä: ${OWNER_CONFIG.enableProxy ? '–í–∫–ª—é—á–µ–Ω' : '–í—ã–∫–ª—é—á–µ–Ω'}

=== –°–¢–ê–¢–ò–°–¢–ò–ö–ê ===
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ${ownerStats.totalUsers}
–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π: ${localStorage.length}
–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: ${new Date().toLocaleString()}`;

            alert(logs);
        }

        // üí∞ –ú–û–ù–ò–¢–û–†–ò–ù–ì –î–û–•–û–î–ê (–¥–µ–º–æ)
        function simulateRevenue() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π
            setInterval(() => {
                if (Math.random() > 0.7 && ownerStats.activeChats > 0) {
                    ownerStats.revenue += Math.floor(Math.random() * 100) + 50;
                    updateOwnerStats();
                }
            }, 300000); // –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
        }

        // –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∏–º—É–ª—è—Ü–∏—é –¥–æ—Ö–æ–¥–∞
        simulateRevenue();
    </script>
</body>
</html>
